export type Language = 'en' | 'de' | 'fr' | 'uk';

export const translations = {
  en: {
    header: {
      howItWorks: 'How it works',
      forEmployers: 'For employers',
      faq: 'FAQ',
      privacy: 'Privacy',
    },
    hero: {
      title: 'Jobs for migrants, faster.',
      description: 'We connect migrants with fair, verified jobs and community support in your area.',
      cta: 'Get early access',
      ctaSubtext: 'Free to join. We\'ll email you when we launch.',
    },
    howItWorks: {
      title: 'How it works',
      step1: {
        title: 'Create your profile',
        description: 'Tell us your skills, languages, and availability.',
      },
      step2: {
        title: 'Get matched',
        description: 'We connect you with verified employers and NGOs.',
      },
      step3: {
        title: 'Start working',
        description: 'Interviews, onboarding, and support along the way.',
      },
    },
    employers: {
      title: 'For employers & NGOs',
      description: 'Access a screened talent pool, language support, and simple posting tools.',
      cta: 'Join partner list',
    },
    waitlist: {
      title: 'Join the waitlist',
      description: 'We\'ll notify you when we launch in your city.',
      name: 'Name',
      email: 'Email',
      language: 'Preferred language',
      whatsapp: 'Contact me via WhatsApp',
      submit: 'Join',
      privacy: 'We respect your privacy. Your data will be stored securely and can be deleted on request.',
    },
    footer: {
      copyright: '© {year} Dana Rey',
      privacy: 'Privacy',
      terms: 'Terms',
      contact: 'Contact',
    },
  },
  de: {
    header: {
      howItWorks: 'So funktioniert es',
      forEmployers: 'Für Arbeitgeber',
      faq: 'FAQ',
      privacy: 'Datenschutz',
    },
    hero: {
      title: 'Jobs für Migranten, schneller.',
      description: 'Wir verbinden Migranten mit fairen, verifizierten Jobs und Gemeinschaftsunterstützung in Ihrer Region.',
      cta: 'Frühen Zugang erhalten',
      ctaSubtext: 'Kostenlos teilnehmen. Wir senden Ihnen eine E-Mail, wenn wir starten.',
    },
    howItWorks: {
      title: 'So funktioniert es',
      step1: {
        title: 'Profil erstellen',
        description: 'Teilen Sie uns Ihre Fähigkeiten, Sprachen und Verfügbarkeit mit.',
      },
      step2: {
        title: 'Zusammengebracht werden',
        description: 'Wir verbinden Sie mit verifizierten Arbeitgebern und NGOs.',
      },
      step3: {
        title: 'Arbeit beginnen',
        description: 'Vorstellungsgespräche, Einarbeitung und Unterstützung auf dem Weg.',
      },
    },
    employers: {
      title: 'Für Arbeitgeber & NGOs',
      description: 'Zugang zu einem geprüften Talentpool, Sprachunterstützung und einfachen Veröffentlichungstools.',
      cta: 'Partnerliste beitreten',
    },
    waitlist: {
      title: 'Warteliste beitreten',
      description: 'Wir benachrichtigen Sie, wenn wir in Ihrer Stadt starten.',
      name: 'Name',
      email: 'E-Mail',
      language: 'Bevorzugte Sprache',
      whatsapp: 'Kontaktieren Sie mich über WhatsApp',
      submit: 'Beitreten',
      privacy: 'Wir respektieren Ihre Privatsphäre. Ihre Daten werden sicher gespeichert und können auf Anfrage gelöscht werden.',
    },
    footer: {
      copyright: '© {year} Dana Rey',
      privacy: 'Datenschutz',
      terms: 'Nutzungsbedingungen',
      contact: 'Kontakt',
    },
  },
  fr: {
    header: {
      howItWorks: 'Comment ça marche',
      forEmployers: 'Pour les employeurs',
      faq: 'FAQ',
      privacy: 'Confidentialité',
    },
    hero: {
      title: 'Emplois pour migrants, plus rapidement.',
      description: 'Nous connectons les migrants avec des emplois équitables, vérifiés et un soutien communautaire dans votre région.',
      cta: 'Obtenir un accès anticipé',
      ctaSubtext: 'Gratuit à rejoindre. Nous vous enverrons un e-mail lors du lancement.',
    },
    howItWorks: {
      title: 'Comment ça marche',
      step1: {
        title: 'Créer votre profil',
        description: 'Dites-nous vos compétences, langues et disponibilité.',
      },
      step2: {
        title: 'Être jumelé',
        description: 'Nous vous connectons avec des employeurs et des ONG vérifiés.',
      },
      step3: {
        title: 'Commencer à travailler',
        description: 'Entretiens, intégration et soutien tout au long du chemin.',
      },
    },
    employers: {
      title: 'Pour les employeurs et ONG',
      description: 'Accédez à un vivier de talents vérifiés, au soutien linguistique et à des outils de publication simples.',
      cta: 'Rejoindre la liste des partenaires',
    },
    waitlist: {
      title: 'Rejoindre la liste d\'attente',
      description: 'Nous vous avertirons lorsque nous lancerons dans votre ville.',
      name: 'Nom',
      email: 'E-mail',
      language: 'Langue préférée',
      whatsapp: 'Me contacter via WhatsApp',
      submit: 'Rejoindre',
      privacy: 'Nous respectons votre vie privée. Vos données seront stockées en toute sécurité et peuvent être supprimées sur demande.',
    },
    footer: {
      copyright: '© {year} Dana Rey',
      privacy: 'Confidentialité',
      terms: 'Conditions',
      contact: 'Contact',
    },
  },
  uk: {
    header: {
      howItWorks: 'Як це працює',
      forEmployers: 'Для роботодавців',
      faq: 'FAQ',
      privacy: 'Конфіденційність',
    },
    hero: {
      title: 'Робота для мігрантів, швидше.',
      description: 'Ми з\'єднуємо мігрантів з чесними, перевіреними робочими місцями та підтримкою спільноти у вашому регіоні.',
      cta: 'Отримати ранній доступ',
      ctaSubtext: 'Безкоштовно приєднатися. Ми надішлемо вам електронну пошту, коли запустимося.',
    },
    howItWorks: {
      title: 'Як це працює',
      step1: {
        title: 'Створити профіль',
        description: 'Розкажіть нам про свої навички, мови та доступність.',
      },
      step2: {
        title: 'Отримати підбір',
        description: 'Ми зв\'язуємо вас з перевіреними роботодавцями та НГО.',
      },
      step3: {
        title: 'Почати працювати',
        description: 'Співбесіди, адаптація та підтримка на шляху.',
      },
    },
    employers: {
      title: 'Для роботодавців та НГО',
      description: 'Доступ до перевіреного пулу талантів, мовної підтримки та простих інструментів розміщення.',
      cta: 'Приєднатися до списку партнерів',
    },
    waitlist: {
      title: 'Приєднатися до списку очікування',
      description: 'Ми повідомимо вас, коли запустимося у вашому місті.',
      name: 'Ім\'я',
      email: 'Електронна пошта',
      language: 'Бажана мова',
      whatsapp: 'Зв\'язатися зі мною через WhatsApp',
      submit: 'Приєднатися',
      privacy: 'Ми поважаємо вашу конфіденційність. Ваші дані будуть безпечно зберігатися та можуть бути видалені на запит.',
    },
    footer: {
      copyright: '© {year} Dana Rey',
      privacy: 'Конфіденційність',
      terms: 'Умови',
      contact: 'Контакт',
    },
  },
} as const;

export function getTranslation(lang: Language) {
  return translations[lang];
}

export function translate(
  key: string,
  lang: Language,
  params?: Record<string, string>
): string {
  const keys = key.split(".");

  // walk the object in a type-safe way using `unknown`
  let current: unknown = translations[lang];
  for (const k of keys) {
    const obj = current as Record<string, unknown> | undefined;
    current = obj ? obj[k] : undefined;
  }

  // fallback to English if not a string
  if (typeof current !== "string") {
    current = translations.en;
    for (const k of keys) {
      const obj = current as Record<string, unknown> | undefined;
      current = obj ? obj[k] : undefined;
    }
  }

  // final value
  const str: string = typeof current === "string" ? current : key;

  // interpolate {placeholders}
  if (params) {
    return str.replace(/\{(\w+)\}/g, (_match: string, k: string): string => {
      return params[k] ?? _match;
    });
  }

  return str;
}
